<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>ESP32 Installer By OOM</title>
    <script src="https://cdn.jsdelivr.net/npm/esptool-js@0.4.0/bundle.js"></script>
</head>
<body style="background:#1a1a1a; color:white; text-align:center; font-family:sans-serif; padding:50px;">
    <div style="border:2px solid #00f2ff; padding:30px; border-radius:20px; display:inline-block;">
        <h1>üöÄ ESP32 Web Installer</h1>
        <p id="status" style="color:#00f2ff; font-size:20px;">üîµ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢...</p>
        <button id="btn" style="padding:15px 30px; font-size:18px; cursor:pointer; background:#555; color:white; border:none; border-radius:10px; font-weight:bold;" disabled>
            ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...
        </button>
    </div>

    <script>
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏ä‡πá‡∏Ñ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏ó‡∏∏‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö
        window.onload = () => {
            const check = setInterval(() => {
                const lib = window.esptooljs || window.esptool;
                if (lib) {
                    clearInterval(check);
                    document.getElementById('status').innerText = "‚úÖ ‡∏ï‡∏±‡∏ß‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≤‡∏¢!";
                    const btn = document.getElementById('btn');
                    btn.disabled = false;
                    btn.style.background = "#00f2ff";
                    btn.style.color = "black";
                    btn.innerText = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ö‡∏≠‡∏£‡πå‡∏î";
                }
            }, 500);
        };

        document.getElementById('btn').onclick = async () => {
            const lib = window.esptooljs || window.esptool;
            try {
                const port = await navigator.serial.requestPort();
                await port.open({ baudRate: 115200 });
                const transport = new lib.Transport(port);
                const esploader = new lib.ESPLoader(transport, 115200);
                document.getElementById('status').innerText = "‚è≥ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß... (‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° BOOT ‡∏ö‡∏ô‡∏ö‡∏≠‡∏£‡πå‡∏î!)";
                await esploader.main();
                document.getElementById('status').innerText = "‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!";
            } catch (e) {
                alert("‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + e.message);
            }
        };
    </script>
</body>
</html>
